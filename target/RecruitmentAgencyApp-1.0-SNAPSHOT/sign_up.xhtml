<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <title>Sign Up</title>
        <h:outputStylesheet name="css/output.css" />

    </h:head>
    <h:body>
        <section class="h-screen">
            <div class="h-full">
                <div class="g-6 grid grid-cols-2 flex h-full flex-wrap items-center justify-center lg:justify-between">
                    <!-- Left column container with background-->
                    <div
                        class="shrink-1 w-full mb-12 grow-0 basis-auto md:mb-0">
                        <img
                            src="https://tecdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp"
                            class="w-full"
                            alt="Sample image" />
                    </div>

                    <!-- Right column container md:w-8/12 lg:w-4/12 xl:w-5/12-->
                    <div class="md:mb-0 w-full px-10 py-5">
                        <h:form>

                            <h1 class="text-5xl mb-4 text-center w-full">Sign Up</h1>

                            <!-- Firstname input -->
                            <div class="relative mb-6" >
                                <h:inputText id="name" value="#{usersMB.u.name}" p:placeholder="Name" class="peer block w-full rounded border-2 bg-gray-200 px-5 py-4 leading-[2.15]" required="true" requiredMessage="Name is required" validatorMessage="Minimum 2 characters required">
                                    <f:validateLength minimum="2" />
                                </h:inputText>
                                <h:message for="name" class="text-red-500"/>

                            </div>

                            <!--Email Address input--> 
                            <div class="relative mb-6">
                                <h:inputText id="email" value="#{usersMB.u.email}" binding="#{email}" p:placeholder="Email Address" required="true" requiredMessage="Email is required" validatorMessage="Invalid Email Address" class="peer block w-full rounded border-0 bg-gray-200 px-5 py-4 leading-[2.15] ">
                                    <f:validateRegex pattern="^[\w\.-]+@[a-zA-Z\d\.-]+\.[a-zA-Z]{2,}$"/>
                                </h:inputText>
                                <h:message for="email" class="text-red-500"/>
                            </div>

                            <!--Phone Number input--> 
                            <div class="relative mb-6">
                                <h:inputText id="phone" value="#{usersMB.u.phoneNo}" p:placeholder="Phone Number" required="true" requiredMessage="Phone No is required" validatorMessage="Phone No must be of 10 digits" class="peer block w-full rounded border-0 bg-gray-200 px-5 py-4 leading-[2.15] ">
                                    <f:validateLength minimum="10" maximum="10" />
                                </h:inputText>
                                <h:message for="phone" class="text-red-500"/>

                            </div>

                            <!--Date of Birth input--> 
                            <div class="relative mb-6">
                                <h:inputText id="dob" value="#{usersMB.dob}" p:placeholder="Date of Birth (dd-MM-yyyy)" required="true" requiredMessage="DOB is required" class="peer block w-full rounded border-0 bg-gray-200 px-5 py-4 leading-[2.15] ">
                                    <!--<f:convertDateTime pattern="dd-MM-yyyy"/>-->
                                </h:inputText>
                                <h:message for="dob" class="text-red-500"/>

                            </div>

                            <!--VPA Address input--> 
                            <div class="relative mb-6" >
                                <h:inputText id="vpaAddress" value="#{usersMB.u.vpaAddress}" p:placeholder="VPA Address" required="true" requiredMessage="VPA Address is required" class="peer block w-full rounded border-0 bg-gray-200 px-5 py-4 leading-[2.15] "/>
                                <h:message for="vpaAddress" class="text-red-500"/>
                            </div>


                            <!--Password input--> 
                            <div class="relative mb-6" >
                                <h:inputSecret id="password" value="#{usersMB.u.password}" binding="#{pass}" p:placeholder="Password" required="true" requiredMessage="Password is required" validatorMessage="Invalid password" class="peer block w-full rounded border-0 bg-gray-200 px-5 py-4 leading-[2.15] ">
                                       <f:validateRegex  pattern="((?=.*[a-z])(?=.*[0-9])(?=.*[@#$%]).{8,12})" />
                                </h:inputSecret>
                                <h:message for="password" class="text-red-500"/>

                            </div>

                            <!--Confirm Password input--> 
                            <div class="relative mb-4" >
                                <h:inputSecret id="confirmPassword" value="#{usersMB.confirmPassword}" p:placeholder="Confirm Password" required="true" requiredMessage="Confirm Password is required" class="peer block w-full rounded border-0 bg-gray-200 px-5 py-4 leading-[2.15] "/>
                                <h:message for="confirmPassword" class="text-red-500"/>

                            </div>

                            <!--Selecting Role-->
                            <div class="relative mb-4" >

                                <h:outputText value="Select Role:" class="text-gray-600" />
                                <h:selectOneRadio value="#{usersMB.roleId}" id="role" class="w-full text-gray-600" required="true" requiredMessage="Select atleast one role">
                                    <f:selectItems itemLabel="#{role.roleName}" value="#{rolesMB.allRolesOtherThanAdmin}" var="role" itemValue="#{role.id}" class="h-4 w-1/2 border-2 border-gray-300 focus:ring-black-600"/>
                                </h:selectOneRadio>
                                <h:message for="role" class="text-red-500"/>

                            </div>
                            <!--For printing error message of Managed Bean-->
                            <h:messages globalOnly="true" class="text-red-500"/>


                            <!--                            <div class="mb-6 mr-2 flex items-center justify-end w-5/6">
                                                             Remember me checkbox 
                                                            <div class="mb-[0.125rem] block min-h-[1.5rem] pl-[1.5rem]">
                            
                                                                <h:selectBooleanCheckbox id="remember"/>
                            
                                                                <h:outputLabel
                                                                    class="inline-block pl-2"
                                                                    for="remember">
                                                                    Remember me
                                                                </h:outputLabel>
                                                            </div>
                                                        </div>-->

                            <!-- Register button -->
                            <div class="flex justify-between relative text-center lg:text-left">
                                <h:commandButton
                                    id="register"
                                    value="Sign Up"
                                    action="#{usersMB.addUser(email.value,pass.value)}"
                                    class="inline-block rounded bg-blue-500 px-7 pb-2.5 pt-3 text-sm font-medium uppercase leading-normal text-white hover:bg-blue-700 "
                                    >
<!--                                    <f:param name="email" value="#{email.value}"/>
                                    <f:param name="pass" value="#{pass.value}"/>-->
                                </h:commandButton>

                                <!-- Login link -->
                                <p class="mb-0 text-sm font-semibold">
                                    Already have an account?
                                    <h:commandLink 
                                        class="font-medium text-red-500 hover:underline"
                                        action="login.jsf?faces-redirect=true"
                                        immediate ="true"
                                        ><br></br><h:outputText value="Sign In"></h:outputText>
                                    </h:commandLink>
                                </p>
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>
        </section>

    </h:body>
</html>
